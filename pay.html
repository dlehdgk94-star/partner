<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì—°ê²° ë°ì´í„° í™•ì¸</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { padding: 30px; font-family: monospace; line-height: 1.5; }
        .box { background: #f4f4f4; padding: 20px; border-radius: 8px; border: 1px solid #ddd; white-space: pre-wrap; }
        h2 { color: #d32f2f; }
        .highlight { color: blue; font-weight: bold; }
    </style>
</head>
<body>

    <h2>ğŸ§ ë°© ì •ë³´ ì—°ê²°(Join) í…ŒìŠ¤íŠ¸</h2>
    <p>ì•„ë˜ ë°•ìŠ¤ ì•ˆì— <strong>"rooms": null</strong> ì´ë¼ê³  ëœ¨ë‚˜ìš”? ì•„ë‹ˆë©´ ë‚´ìš©ì´ ìˆë‚˜ìš”?</p>
    
    <div id="result" class="box">ë°ì´í„° ì¡°íšŒ ì¤‘...</div>

    <script>
        const supabaseUrl = 'https://eyasihczaqsacenklhns.supabase.co'
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5YXNpaGN6YXFzYWNlbmtsaG5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjY5MTIsImV4cCI6MjA3OTk0MjkxMn0.E1J5qEgl79Ato3upXJSL0OyrgsOw6gJbNHo88AWdct0'
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey)

        async function testJoin() {
            const el = document.getElementById('result');
            
            // inventoryì™€ roomsë¥¼ ê°™ì´ ê°€ì ¸ì™€ë³¸ë‹¤.
            const { data, error } = await supabase
                .from('inventory')
                .select(`
                    room_id, 
                    rooms ( name, total_rooms )
                `)
                .limit(3); // 3ê°œë§Œ í™•ì¸

            if (error) {
                el.innerHTML = `âŒ ì—ëŸ¬ ë°œìƒ:\n${JSON.stringify(error, null, 2)}`;
                return;
            }

            if (!data || data.length === 0) {
                el.innerHTML = "âš ï¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. inventory í…Œì´ë¸”ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.";
                return;
            }

            // ê²°ê³¼ ì¶œë ¥
            el.innerHTML = "âœ… ê°€ì ¸ì˜¨ ë°ì´í„°:\n" + JSON.stringify(data, null, 2);
        }

        testJoin();
    </script>
</body>
</html>
